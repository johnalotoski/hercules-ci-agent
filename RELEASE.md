Example releasing hercules-ci-agent and optionally hercules-ci-api:

- git checkout -B vX.X.X (new agent version)
- update hercules-ci-api/CHANGELOG.md
   - git log PREVIOUS..HEAD -- ./hercules-ci-api
- bump api version
   - hercules-ci-api/CHANGELOG.md
   - hercules-ci-api/hercules-ci-api.cabal
   - hercules-ci-agent/hercules-ci-agent.cabal
- scripts/generate-nix
- git add --patch
- git commit -m "hercules-ci-api-Y.Y.Y.Y"
- update hercules-ci-agent/CHANGELOG.md
   - git log PREVIOUS..HEAD -- ./for-upstream ./hercules-ci-agent
- bump agent version
   - hercules-ci-agent/CHANGELOG.md
   - hercules-ci-agent/hercules-ci-agent.cabal
   - for-upstream/common.nix package option
- add a markdown link in CHANGELOG.md markdown link for the added version tag (header and link map at the bottom)
- scripts/generate-nix
- git add --patch
- git commit -m "hercules-ci-agent-X.X.X"
- wait for CI to succeed
- git log -2
- copy the contents of the api changelog for this release to: git tag -s -a hercules-ci-api-Y.Y.Y.Y API_COMMIT
- copy the contents of the agent changelog for this release to: git tag -s -a hercules-ci-agent-X.X.X AGENT_COMMIT
- git push --tags
- open a PR against master
- open a PR against stable using the tag as a base
- update `for-upstream` (bump version, etc) and sync with nix-darwin
- make sure to verify default pacakge url is accesible
